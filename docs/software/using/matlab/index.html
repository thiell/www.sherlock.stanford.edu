<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Sherlock Cluster documentation"><link href=https://www.sherlock.stanford.edu/docs/software/using/matlab/ rel=canonical><meta name=author content="Kilian Cavalotti"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\_\-\.]+><link rel="shortcut icon" href=../../../../img/logo_small.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-4.6.0"><title>Matlab - Sherlock</title><link rel=stylesheet href=../../../../assets/stylesheets/application.1b62728e.css><link rel=stylesheet href=../../../../assets/stylesheets/application-palette.c4a2eec3.css><meta name=theme-color content><script src=../../../../assets/javascripts/modernizr.268332fc.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../../../../assets/fonts/material-icons.css><link rel=manifest href=../../../../manifest.webmanifest><link rel=stylesheet href=../../../..><script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-68034405-2", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-primary=stanford data-md-color-accent=stanford> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#introduction tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://www.sherlock.stanford.edu/ title=Sherlock class="md-header-nav__button md-logo"> <img src=../../../../img/logo_small.png width=24 height=24> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Sherlock </span> <span class=md-header-nav__topic> Matlab </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/stanford-rc/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> SRCC <i class="fa fa-heart-o"></i> Open Source </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main role=main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://www.sherlock.stanford.edu/ title=Sherlock class="md-nav__button md-logo"> <img src=../../../../img/logo_small.png width=48 height=48> </a> Sherlock </label> <div class=md-nav__source> <a href=https://github.com/stanford-rc/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> SRCC <i class="fa fa-heart-o"></i> Open Source </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> Overview </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-1> Overview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../overview/introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../overview/concepts/ title=Concepts class=md-nav__link> Concepts </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-1-3 type=checkbox id=nav-1-3> <label class=md-nav__link for=nav-1-3> Ordering nodes </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-1-3> Ordering nodes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../overview/orders/process/ title=Process class=md-nav__link> Process </a> </li> <li class=md-nav__item> <a href=../../../overview/orders/catalog/ title=Catalog class=md-nav__link> Catalog </a> </li> <li class=md-nav__item> <a href=../../../overview/orders/form/ title="Order form" class=md-nav__link> Order form </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-1-4 type=checkbox id=nav-1-4> <label class=md-nav__link for=nav-1-4> Technical </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-1-4> Technical </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../overview/tech/specs/ title=Specs class=md-nav__link> Specs </a> </li> <li class=md-nav__item> <a href=../../../overview/tech/status/ title=Status class=md-nav__link> Status </a> </li> <li class=md-nav__item> <a href=../../../overview/tech/glossary/ title=Glossary class=md-nav__link> Glossary </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../overview/about/ title=About class=md-nav__link> About </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Getting Started </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-2> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/prerequisites/ title=Prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../../getting-started/connecting/ title=Connecting class=md-nav__link> Connecting </a> </li> <li class=md-nav__item> <a href=../../../getting-started/submitting/ title="Submitting jobs" class=md-nav__link> Submitting jobs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> User guide </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-3> User guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user-guide/running-jobs/ title="Running jobs" class=md-nav__link> Running jobs </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-2 type=checkbox id=nav-3-2> <label class=md-nav__link for=nav-3-2> Specialized resources </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-3-2> Specialized resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user-guide/gpu/ title="GPU nodes" class=md-nav__link> GPU nodes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../user-guide/ondemand/ title=OnDemand class=md-nav__link> OnDemand </a> </li> <li class=md-nav__item> <a href=../../../user-guide/troubleshoot/ title=Troubleshooting class=md-nav__link> Troubleshooting </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Storage </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> Storage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../storage/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../storage/filesystems/ title=Filesystems class=md-nav__link> Filesystems </a> </li> <li class=md-nav__item> <a href=../../../storage/data-sharing/ title="Data sharing" class=md-nav__link> Data sharing </a> </li> <li class=md-nav__item> <a href=../../../storage/data-protection/ title="Data protection" class=md-nav__link> Data protection </a> </li> <li class=md-nav__item> <a href=../../../storage/data-transfer/ title="Data transfer" class=md-nav__link> Data transfer </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5 checked> <label class=md-nav__link for=nav-5> Software </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> Software </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../list/ title=List class=md-nav__link> List </a> </li> <li class=md-nav__item> <a href=../../modules/ title=Modules class=md-nav__link> Modules </a> </li> <li class=md-nav__item> <a href=../../install/ title=Installation class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=../../containers/ title=Containers class=md-nav__link> Containers </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-6 type=checkbox id=nav-5-6 checked> <label class=md-nav__link for=nav-5-6> Usage </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-6> Usage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../R/ title=R class=md-nav__link> R </a> </li> <li class=md-nav__item> <a href=../julia/ title=Julia class=md-nav__link> Julia </a> </li> <li class=md-nav__item> <a href=../python/ title=Python class=md-nav__link> Python </a> </li> <li class=md-nav__item> <a href=../perl/ title=Perl class=md-nav__link> Perl </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Matlab </label> <a href=./ title=Matlab class="md-nav__link md-nav__link--active"> Matlab </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#more-documentation class=md-nav__link> More documentation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#matlab-on-sherlock class=md-nav__link> MATLAB on Sherlock </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#licensing class=md-nav__link> Licensing </a> </li> <li class=md-nav__item> <a href=#using-matlab class=md-nav__link> Using MATLAB </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#running-a-matlab-script class=md-nav__link> Running a MATLAB script </a> </li> <li class=md-nav__item> <a href=#matlab-gui class=md-nav__link> MATLAB GUI </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> Examples </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#simple-matlab-job class=md-nav__link> Simple MATLAB job </a> </li> <li class=md-nav__item> <a href=#parallel-loop class=md-nav__link> Parallel loop </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../rclone/ title=Rclone class=md-nav__link> Rclone </a> </li> <li class=md-nav__item> <a href=../singularity/ title=Singularity class=md-nav__link> Singularity </a> </li> <li class=md-nav__item> <a href=../spark/ title=Spark class=md-nav__link> Spark </a> </li> <li class=md-nav__item> <a href=../mariadb/ title=MariaDB class=md-nav__link> MariaDB </a> </li> <li class=md-nav__item> <a href=../postgresql/ title=PostgreSQL class=md-nav__link> PostgreSQL </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Advanced topics </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-6> Advanced topics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../advanced-topics/connection/ title=Connection class=md-nav__link> Connection </a> </li> <li class=md-nav__item> <a href=../../../advanced-topics/job-management/ title="Job management" class=md-nav__link> Job management </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#more-documentation class=md-nav__link> More documentation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#matlab-on-sherlock class=md-nav__link> MATLAB on Sherlock </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#licensing class=md-nav__link> Licensing </a> </li> <li class=md-nav__item> <a href=#using-matlab class=md-nav__link> Using MATLAB </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#running-a-matlab-script class=md-nav__link> Running a MATLAB script </a> </li> <li class=md-nav__item> <a href=#matlab-gui class=md-nav__link> MATLAB GUI </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> Examples </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#simple-matlab-job class=md-nav__link> Simple MATLAB job </a> </li> <li class=md-nav__item> <a href=#parallel-loop class=md-nav__link> Parallel loop </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/stanford-rc/www.sherlock.stanford.edu/edit/docs/src/docs/software/using/matlab.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1>Matlab</h1> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">#</a></h2> <p><a href=//www.mathworks.com/matlab>MATLAB</a> is a numerical computing environment and proprietary programming language developed by <a href=//www.mathworks.com/ >MathWorks</a>.</p> <h3 id=more-documentation>More documentation<a class=headerlink href=#more-documentation title="Permanent link">#</a></h3> <p>The following documentation is specifically intended for using Matlab on Sherlock. For more complete documentation about Matlab in general, please see the official <a href=//www.mathworks.com/help/matlab/ >MATLAB documentation</a>.</p> <h2 id=matlab-on-sherlock>MATLAB on Sherlock<a class=headerlink href=#matlab-on-sherlock title="Permanent link">#</a></h2> <h3 id=licensing>Licensing<a class=headerlink href=#licensing title="Permanent link">#</a></h3> <p>MATLAB is a commercial software suite, which requires users to purchase a license before they can use it. MATLAB is licensed at the group-level on Sherlock, meaning that once a group is granted access to the software, all the members of the authorized group will get access to MATLAB.</p> <div class="admonition warning"> <p class=admonition-title>Groups are responsible for procuring their own licenses</p> <p>MATLAB licenses<sup id=fnref:lic_num><a class=footnote-ref href=#fn:lic_num>1</a></sup> can be purchased through <a href=//uit.stanford.edu/service/softwarelic>Stanford Software Licensing</a> by visiting the following link: <a href=https://stanford.onthehub.com/WebStore/Welcome.aspx>https://stanford.onthehub.com/WebStore/Welcome.aspx</a>.</p> <p>After your purchase, you can <a href=mailto:srcc-support@stanford.edu>contact us</a> to request MATLAB access. Please CC Stanford Software Licensing (<a href=mailto:software@stanford.edu>&#115;&#111;&#102;&#116;&#119;&#97;&#114;&#101;&#64;&#115;&#116;&#97;&#110;&#102;&#111;&#114;&#100;&#46;&#101;&#100;&#117;</a>), and include your license ID or receipt in the email, for verification. Once we get approval from the Software License team, all the members of your group will be granted access to MATLAB on Sherlock.</p> </div> <blockquote> <p><strong>Note</strong>: a number of free, open-source alternatives exist and can be used in many situations: <a href=//www.gnu.org/software/octave/ >Octave</a>, <a href=/docs/software/using/R>R</a>, <a href=/docs/software/using/julia>Julia</a>, or <a href=/docs/software/using/python>Python</a> are all available on Sherlock, and can often replace MATLAB with good results.</p> </blockquote> <h3 id=using-matlab>Using MATLAB<a class=headerlink href=#using-matlab title="Permanent link">#</a></h3> <p>Once your group has been granted access, the MATLAB <a href=/docs/software/modules>module</a> can be loaded with:</p> <div class=highlight><pre><span></span><code>$ ml load matlab
</code></pre></div> <p>This will load the current default version. For a list of available versions run <code>ml spider matlab</code> at the Sherlock prompt, or refer to the <a href=/docs/software/list>Software list page</a>.</p> <div class="admonition danger"> <p class=admonition-title>MATLAB can't run on login nodes</p> <p>Running MATLAB directly on login nodes is not supported and will produce the following message: <div class=highlight><pre><span></span><code>-----------------------------------------------------------------------
WARNING: running MATLAB directly on login nodes is not supported.  Please
make sure you request an interactive session on a compute node with &quot;sdev&quot;
for instance) before launching MATLAB interactively.
-----------------------------------------------------------------------
</code></pre></div> You will need to <a href=/docs/getting-started/submitting/#batch-scripts>submit a job</a> or request an <a href=/docs/user-guide/running-jobs/#interactive-jobs>interactive session</a> on a <a href=/docs/user-guide/running-jobs/#compute-nodes>compute node</a> before you can start MATLAB.</p> </div> <p>Once you are on a compute node and your environment is configured (<em>ie.</em> when the <code>matlab</code> module is loaded), MATLAB can be started by simply typing <code>matlab</code> at the shell prompt.</p> <div class=highlight><pre><span></span><code>$ sdev
$ ml load matlab
$ matlab
MATLAB is selecting SOFTWARE OPENGL rendering.
                          &lt; M A T L A B (R) &gt;
                Copyright 1984-2019 The MathWorks, Inc.
                R2019a (9.6.0.1072779) 64-bit (glnxa64)
                             March 8, 2019

To get started, type doc.
For product information, visit www.mathworks.com.

&gt;&gt;
</code></pre></div> <p>For a listing of command line options:</p> <div class=highlight><pre><span></span><code>$ matlab -help
</code></pre></div> <h4 id=running-a-matlab-script>Running a MATLAB script<a class=headerlink href=#running-a-matlab-script title="Permanent link">#</a></h4> <p>There are several ways to launch a MATLAB script on the command line, as documented in the <a href=//www.mathworks.com/help/matlab/ref/matlablinux.html>MATLAB documentation</a>:</p> <table> <thead> <tr> <th>Method</th> <th>Output</th> </tr> </thead> <tbody> <tr> <td><code>matlab -nodesktop &lt; script.m</code></td> <td>MATLAB will run the code from <code>script.m</code> and display output on <code>stdout</code></td> </tr> <tr> <td><code>matlab -nodisplay</code></td> <td>Start MATLAB in CLI mode, without its graphical desktop environment</td> </tr> <tr> <td><code>matlab -nojvm</code></td> <td>do not start the JVM<sup id=fnref:JVM><a class=footnote-ref href=#fn:JVM>2</a></sup></td> </tr> </tbody> </table> <h4 id=matlab-gui>MATLAB GUI<a class=headerlink href=#matlab-gui title="Permanent link">#</a></h4> <p>It's often best to use your laptop or desktop to develop, debug MATLAB and visualize the output. If you do need to use the MATLAB GUI on a large cluster like Sherlock, you will need to enable X11 forwarding in your <a href=/docs/getting-started/prerequisites/#ssh-clients><abbr title="Secure Shell">SSH</abbr> client</a>.</p> <p>For instance:</p> <div class=highlight><pre><span></span><code>$ ssh -X &lt;YourSUNetID&gt;@login.sherlock.stanford.edu
</code></pre></div> <p>And then, once on Sherlock:</p> <div class=highlight><pre><span></span><code>$ sdev
$ ml load matlab
$ matlab
</code></pre></div> <p>For more info on X11 forwarding, you can refer to this <a href=//uit.stanford.edu/service/sharedcomputing/moreX>UIT page</a>.</p> <h3 id=examples>Examples<a class=headerlink href=#examples title="Permanent link">#</a></h3> <h4 id=simple-matlab-job>Simple MATLAB job<a class=headerlink href=#simple-matlab-job title="Permanent link">#</a></h4> <p>Here is an example MATLAB batch script that can submitted with <code>sbatch</code>:</p> <div class=highlight><pre><span></span><code><span class=ch>#!/bin/bash</span>
<span class=c1>#SBATCH --job-name=matlab_test</span>
<span class=c1>#SBATCH --output=matlab_test.&quot;%j&quot;.out</span>
<span class=c1>#SBATCH --error=matlab_test.&quot;%j&quot;.err</span>
<span class=c1>#SBATCH --partition=normal</span>
<span class=c1>#SBATCH --time=00:10:00</span>
<span class=c1>#SBATCH --cpus-per-task=1</span>
<span class=c1>#SBATCH --mem=8GB</span>
<span class=c1>#SBATCH --mail-type=ALL</span>

module load matlab
matlab -nodisplay &lt; example.m
</code></pre></div> <p>This simple job, named <code>matlab_test</code> will run a MATLAB script named <code>example.m</code> in the <code>normal</code> <a href=/docs/overview/glossary/#partition>partition</a>, for a duration of 10 minutes, and use 1 <a href=/docs/overview/glossary/#cpu><abbr title="Central Processing Unit">CPU</abbr></a> and 8GB of <abbr title="Random Access Memory">RAM</abbr>. It will send you an email (to whatever email you used wen you signed up for Sherlock) when it begins, ends or fails.</p> <p>Additionally, to aid in debugging, it will log any errors and output to the files <code>matlab_test.JOBID.{out,err}</code> with the jobid appended to the filename (<code>%j</code>).</p> <p>To create the script, open a <a href=/docs/getting-started/prerequisites/#text-editors>text editor</a> on Sherlock, copy the contents of the script, and save it as <code>matlab_test.sbatch</code></p> <p>Then, submit the job with the <code>sbatch</code> command: <div class=highlight><pre><span></span><code>$ sbatch matlab_test.sbatch
Submitted batch job 59942277
</code></pre></div></p> <p>You can check the status of the job with the <a href=/docs/getting-started/submitting/#check-the-job><code>squeue</code></a> command, and check the contents of the <code>matlab_test.JOBID.{out,err}</code> files to see the results.</p> <h4 id=parallel-loop>Parallel loop<a class=headerlink href=#parallel-loop title="Permanent link">#</a></h4> <p>You can run your MATLAB code across multiple CPUs on Sherlock using <a href=https://www.mathworks.com/help/parallel-computing/parfor.html><code>parfor</code></a> loops, to take advantage of the multiple <abbr title="Central Processing Unit">CPU</abbr> cores that each node features. You can submit a job requesting as many CPUs as there are on a node in a single job. The key is to grab the <a href=https://slurm.schedmd.com/sbatch.html#lbAJ>SLURM environment variable</a> <code>$SLURM_CPUS_PER_TASK</code> and create the worker pool in your MATLAB code with:</p> <div class=highlight><pre><span></span><code><span class=n>parpool</span><span class=p>(</span><span class=s>&#39;local&#39;</span><span class=p>,</span> <span class=n>str2num</span><span class=p>(</span><span class=n>getenv</span><span class=p>(</span><span class=s>&#39;SLURM_CPUS_PER_TASK&#39;</span><span class=p>)))</span>
</code></pre></div> <p>Here is an example of a <code>sbatch</code> submission script that requests 16 CPUs on a node, and runs a simple MATLAB script using <code>parfor</code>.</p> <p>Save the two scripts below as <code>parfor.sbatch</code> and <code>parfor.m</code>:</p> <p>=== <code>parfor.sbatch</code> <div class=highlight><pre><span></span><code><span class=ch>#!/bin/bash</span>
<span class=c1>#SBATCH -J pfor_matlab</span>
<span class=c1>#SBATCH -o pfor&quot;.%j&quot;.out</span>
<span class=c1>#SBATCH -e pfor&quot;.%j&quot;.err</span>
<span class=c1>#SBATCH -t 20:00</span>
<span class=c1>#SBATCH -p normal</span>
<span class=c1>#SBATCH -c 16</span>
<span class=c1>#SBATCH --mail-type=ALL</span>

module load matlab
matlab -nosplash -nodesktop -r parfor.m
</code></pre></div></p> <p>=== <code>parfor.m</code> <div class=highlight><pre><span></span><code><span class=c>%============================================================================</span>
<span class=c>% Parallel Monte Carlo calculation of PI</span>
<span class=c>%============================================================================</span>
<span class=n>parpool</span><span class=p>(</span><span class=s>&#39;local&#39;</span><span class=p>,</span> <span class=n>str2num</span><span class=p>(</span><span class=n>getenv</span><span class=p>(</span><span class=s>&#39;SLURM_CPUS_PER_TASK&#39;</span><span class=p>)))</span>
<span class=n>R</span> <span class=p>=</span> <span class=mi>1</span><span class=p>;</span>
<span class=n>darts</span> <span class=p>=</span> <span class=mf>1e7</span><span class=p>;</span>
<span class=n>count</span> <span class=p>=</span> <span class=mi>0</span><span class=p>;</span>
<span class=n>tic</span>
<span class=s>parfor</span> <span class=s>i</span> <span class=s>=</span> <span class=s>1:darts</span>
   <span class=c>% Compute the X and Y coordinates of where the dart hit the...............</span>
   <span class=c>% square using Uniform distribution.......................................</span>
   <span class=n>x</span> <span class=p>=</span> <span class=n>R</span><span class=o>*</span><span class=nb>rand</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
   <span class=n>y</span> <span class=p>=</span> <span class=n>R</span><span class=o>*</span><span class=nb>rand</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
   <span class=n>if</span> <span class=s>x^2</span> <span class=s>+</span> <span class=s>y^2</span> <span class=s>&lt;=</span> <span class=s>R^2</span>
      <span class=c>% Increment the count of darts that fell inside of the.................</span>
      <span class=c>% circle...............................................................</span>
     <span class=n>count</span> <span class=p>=</span> <span class=n>count</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span> <span class=c>% Count is a reduction variable.</span>
   <span class=n>end</span>
<span class=s>end</span>
<span class=c>% Compute pi.................................................................</span>
<span class=n>myPI</span> <span class=p>=</span> <span class=mi>4</span><span class=o>*</span><span class=n>count</span><span class=o>/</span><span class=n>darts</span><span class=p>;</span>
<span class=n>T</span> <span class=p>=</span> <span class=n>toc</span><span class=p>;</span>
<span class=n>fprintf</span><span class=p>(</span><span class=s>&#39;The computed value of pi is %8.7f.n&#39;</span><span class=p>,</span><span class=n>myPI</span><span class=p>);</span>
<span class=n>fprintf</span><span class=p>(</span><span class=s>&#39;The parallel Monte-Carlo method is executed in %8.2f seconds.n&#39;</span><span class=p>,</span> <span class=n>T</span><span class=p>);</span>
<span class=n>delete</span><span class=p>(</span><span class=n>gcp</span><span class=p>);</span>
<span class=n>exit</span><span class=p>;</span>
</code></pre></div></p> <p>You can now submit the job with the following command: <div class=highlight><pre><span></span><code>sbatch parfor.sbatch
</code></pre></div></p> <p>If you run <code>htop</code> or <code>pstree -u $USER</code> on the compute node that is running your job, you will see all 16 cores allocated to your MATLAB code.</p> <p>You can also try that same job with different numbers of CPUs, and see how well it scales.</p> <div class=footnote> <hr> <ol> <li id=fn:lic_num> <p>We usually recommend groups to purchase as many licenses as groups will have users running MATLAB on Sherlock.&#160;<a class=footnote-backref href=#fnref:lic_num title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> <li id=fn:JVM> <p>MATLAB uses the Java® Virtual Machine (JVM™) software to run the desktop and to display graphics. The <code>-nojvm</code> option enables you to start MATLAB without the JVM. Using this option minimizes memory usage and improves initial start-up speed, but restricts functionality.&#160;<a class=footnote-backref href=#fnref:JVM title="Jump back to footnote 2 in the text">&#8617;</a></p> </li> </ol> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../perl/ title=Perl class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Previous </span> Perl </span> </div> </a> <a href=../rclone/ title=Rclone class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Next </span> Rclone </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2014 - 2020 &mdash; <a href=mailto:srcc-support@stanford.edu>Stanford Research Computing Center</a> </div> Made with <i class="fa fa-heart md-highlight"></i> in <span class=md-footer-copyright__highlight> <a href=https://www.google.com/maps/place/Stanford,+CA>Stanford, California</a> </span></div> <div class=md-footer-social> <link rel=stylesheet href=../../../../assets/fonts/font-awesome.css> <a href=https://srcc.stanford.edu class="md-footer-social__link fa fa-globe"></a> <a href=https://github.com/stanford-rc class="md-footer-social__link fa fa-github"></a> <a href=https://twitter.com/StanfordCompute class="md-footer-social__link fa fa-twitter"></a> <a href=https://www.linkedin.com/school/1792/ class="md-footer-social__link fa fa-linkedin"></a> </div> </div> </div> </footer> </div> <script src=../../../../assets/javascripts/application.9704d1e1.js></script> <script>app.initialize({version:"1.1.2",url:{base:"../../../.."}})</script> <script src=../../../..></script> <script src=../../../../search/main.js></script> </body> </html>